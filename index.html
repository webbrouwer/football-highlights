<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Footbal Highlights</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />	

	<style>
		html {
			height: 100%;
			box-sizing: border-box;
		}

		*,
		*:before,
		*:after {
		  box-sizing: inherit;
		}		

		body {
			position: relative;
			font-family: Arial, sans-serif;	
			margin: 0;
			min-height: 100%;	
			color: #eee;
			text-align: center;
		}

		hr {
			border: 0;
		    border-top: 1px solid #e5e5e5;
		    margin: 2em auto 1em;
		}

		h1 {
			margin-top: 0;
			padding-top: 2em;
			color: #eee;
		}	

		.center {
			text-align: center;
		}

		.container {
			margin-left: auto;
		    margin-right: auto;
		    max-width: 38em;
		    width: 88%;
		}

		.container-large {
		    max-width: 60em;
		}

		.margin-bottom-small {
		    margin-bottom: .5em;
		}

		label {
			display: block;
		}

		footer {
		    text-align: center;
		    font-size: 75%;
			position: absolute;
			right: 0;
			bottom: 0;
			left: 0;
			color: #eee;		    
		}


/* General Styles */    
center > h4 { color: #00a0d1; margin-top: 50px; }
    body { margin: 0; font-family: Arial; background-color: #3498db; }
    ul#growing-search-freebie { display: table; list-style: none; margin: 50px auto 0 auto; padding: 0; }
    ul#growing-search-freebie > li { float: left; margin-right: 20px; margin-bottom: 20px; padding: 10px 10px; }
    ul#growing-search-freebie > li:last-child { margin-right: 0; }
    ul#growing-search-freebie > li > span { margin-bottom: 10px; }


	/* STYLES */
	/*
	 * Freebie from PixelsDaily
	 * (www.pixelsdaily.com)
	 *
	 * @freebie: growing-search
	 * @author: Francisco Neves (@fntneves)
	 * @website: www.francisconeves.com
	 */

	.growing-search {
	  padding: 5px 5px 5px 7px;
	  border-radius: 5px;
	  background: #fff;
	}

	.growing-search div {
	  display: inline-block;
	  font-size: 12px;
	}

	.growing-search .input input {
	  margin-right: 0;
	  border: none;
	  font-size: inherit;
	  transition: width 200ms;
	  padding-top: 5px;
	  padding-left: 5px;
	  padding-bottom: 5px;
	  width: 55px;
	  color: #aaa;
	  border-bottom: 1px solid #eee;
	}

	.growing-search .input input:focus {
	  width: 150px;
	}

	.growing-search .submit button {
	  margin-left: 0;
	  border: none;
	  font-size: 1.15em;
	  color: #aaa;
	  background-color: #fff;
	  padding-top: 2px;
	  padding-bottom: 2px;
	  transition: color 200ms;
	}

	.growing-search .input input:hover, .growing-search .submit button:hover {
	  cursor: pointer;
	}

	.growing-search .input input:focus, .growing-search .submit button:focus {
	  outline: none;
	}

	.growing-search .submit button:hover {
	  color: #3498db;
	}		


	</style>
</head>
<body>

	<div class="container">
		<h1 class="center">Football Highlights</h1>

		<form id="form" class="margin-bottom-small" action="">
			<div class="center">

			 <ul id="growing-search-freebie">
			    <li>
			      <!-- Start Freebie Markup -->
			      <div class="growing-search">
			        <div class="input">
			          <input type="text" id="clubName" name="clubName" autocomplete="off" />
			        </div><!-- Space hack --><div class="submit">
			          <button type="submit">
			            <span class="fa fa-search"></span>
			          </button>
			        </div>
			      </div>
			      <!-- End Freebie Markup -->
			    </li>
			  </ul>

			</div>	
		</form>

		<div id="js-app"></div>

	</div>

	<footer class="container container-large">
        <hr>

        <p>Code by <a href="https://webbrouwer.com/">WebBrouwer</a> | <a href="https://www.scorebat.com/video-api/">Football video API</a></p>
    </footer>	

	<script>
		
		//
		// Variables
		//

		var apiLink = 'https://www.scorebat.com/video-api/v1/';
		var app = document.querySelector('#js-app');
		var clubToFind;
		var clubName = document.querySelector('#js-clubname');	
		var results;


		//
		// Functions
		//

		/*
		 * Find the searched club to fetch the highlights and display to viewport
		 */
		function findClubFromApiData(data, clubToFind) {
			results = [];

			for(var i = 0; i < data.length; i++) {
				if(data[i].title.search(clubToFind) != -1) {
					results.push(data[i]);
				} 
			}

			if(!results.length) {
				app.innerText = 'No results found for ' + clubToFind;
			} else {
				renderHighlights(results);
			}
		}


		/**
		 * Render articles into the DOM
		 * @param  {Array} articles The articles to render
		 */
		function renderHighlights (results) {

			// Create a new array of markup strings with array.map(), then
			// Combine them into one string with array.join(), then
			// Insert them into the DOM with innerHTML
			app.innerHTML += results.map(function (result) {
				var html =
					'<article>' +
						'<h3>' + result.title + '</h3>' +
						'<div>' + result.embed + '</div>' +
					'</article>';
				return html;
			}).join('');

		};

		/*
		 * Capitalize first letter of words in string
		 */
		function capitalizeTheFirstLetterOfEachWord(words) {
		   var separateWord = words.toLowerCase().split(' ');
		   for (var i = 0; i < separateWord.length; i++) {
		      separateWord[i] = separateWord[i].charAt(0).toUpperCase() +
		      separateWord[i].substring(1);
		   }
		   return separateWord.join(' ');
		}


		/**
		 * Handle submit events
		 * @param  {Event} event The event object
		 */
		function submitHandler(event) {

			// Prevent form from submitting to the server
			event.preventDefault();

			clubToFind = capitalizeTheFirstLetterOfEachWord(document.querySelector('#clubName').value);

			// If input value is empty return --> exit ;-)
			if (clubToFind === '') {
				return;
			}

			// Reset app ui
			app.innerHTML = '';

			// Fetch the highlights for the searched club
			fetch(apiLink)
			  .then(response => response.json())
			  .then(data => findClubFromApiData(data, clubToFind));	  

		};		  


		//
		// Init & Events listeners
		//		  

		// Listen for submit events
		document.addEventListener('submit', submitHandler, false);
	</script>
</body>
</html>